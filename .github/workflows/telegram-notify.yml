  - name: Send to Telegram
        run: |
          TELEGRAM_BOT_TOKEN="7715307360:AAFvEpydlOSPY_pGT51AbExRAaECg-1P06Q"
          CHAT_ID="5615087670"

          COMMIT_MESSAGE=$(git log -1 --pretty=format:"%s%n%n%b")
          COMMIT_DIFF=$(git diff HEAD^ HEAD)

          escape_markdown() {
            echo "$1" | sed \
              -e 's/\*/\\*/g' -e 's/_/\\_/g' -e 's/\[/\\[/g' -e 's/\]/\\]/g' \
              -e 's/(/\\(/g' -e 's/)/\\)/g' -e 's/\~/\\~/g' -e 's/\`/\\`/g' \
              -e 's/>/\\>/g' -e 's/#/\\#/g' -e 's/\+/\\+/g' -e 's/\-/\\-/g' \
              -e 's/=/\\=/g' -e 's/!/\\!/g' -e 's/\./\\./g'
          }

          ESCAPED_MESSAGE=$(escape_markdown "$COMMIT_MESSAGE")
          ESCAPED_DIFF=$(escape_markdown "$COMMIT_DIFF")

          SHORT_DIFF=$(echo "$ESCAPED_DIFF" | head -n 50)
          [ $(echo "$SHORT_DIFF" | wc -c) -gt 3000 ] && SHORT_DIFF="$(echo "$SHORT_DIFF" | head -c 3000)..."

          COMMIT_URL="https://github.com/${{ github.repository }}/commit/${{ github.sha }}"

          MESSAGE="üöÄ *–ù–æ–≤—ã–π –∫–æ–º–º–∏—Ç:*\n\n*üìÑ –û–ø–∏—Å–∞–Ω–∏–µ:*\n${ESCAPED_MESSAGE}\n\nüõ† *–ò–∑–º–µ–Ω–µ–Ω–∏—è:*\n\`\`\`\n${SHORT_DIFF}\n\`\`\`\nüîó [–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ GitHub](${COMMIT_URL})"

          JSON_PAYLOAD=$(jq -n \
            --arg chat_id "$CHAT_ID" \
            --arg text "$MESSAGE" \
            '{
              chat_id: $chat_id,
              text: $text,
              parse_mode: "MarkdownV2",
              disable_web_page_preview: true
            }')

          curl -s -X POST \
            -H "Content-Type: application/json" \
            -d "$JSON_PAYLOAD" \
            "https://api.telegram.org/bot$TELEGRAM_BOT_TOKEN/sendMessage"
